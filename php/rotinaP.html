<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../chatbot/style.css">
    <title>Rotina - Pais</title>
    <style>
        /* Reset de margin e padding */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* Corpo da página */
        body {
            font-family: Arial, Helvetica, sans-serif;
            background-color: #e3f2fd;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Cabeçalho */
        .header {
            padding: 10px 20px;
        }

        .seta {
            color: rgb(52, 140, 255);
            font-size: 24px;
        }

        /* Título da página */
        h1 {
            text-align: center;
            color: rgb(0, 0, 0);
            font-size: 1.5em;
            margin: 20px 0;
        }

        /* Container principal com a tabela */
        .container-dad {
            padding: 20px;
            margin: 10% auto;
            max-width: 800px;
            background-color: #ffffff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            border-radius: 16px;
            animation: bounceIn 1s ease;
            width: 90%;
        }

        /* Animação de entrada */
        @keyframes bounceIn {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* Estilos da tabela */
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 5%;
            background-color: #ffffff;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 15px;
            text-align: center;
            border-bottom: 2px solid #90caf9;
            font-size: 16px;
        }

        th {
            background-color: #007bff;
            color: #ffffff;
            text-transform: uppercase;
            border-bottom: 3px solid #0056b3;
            font-size: 18px;
        }

        td {
            background-color: #e1f5fe;
            transition: background-color 0.3s ease;
        }

        td:hover {
            background-color: #b3e5fc;
        }

        td.editable {
            background-color: #ffffff;
            cursor: pointer;
        }

        td button {
            background-color: #007bff;
            color: #ffffff;
            border: none;
            padding: 8px 12px;
            font-size: 14px;
            cursor: pointer;
            border-radius: 12px;
            transition: background-color 0.3s ease;
        }

        td button:hover {
            background-color: #0056b3;
        }

        /* Botões principais */
        .button-container {
            margin-top: 20px;
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .button-container button {
            background-color: #007bff;
            color: #ffffff;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 30px;
            transition: background-color 0.3s ease;
            width: 200px;
            margin: 5px;
        }

        .button-container button:hover {
            background-color: #0056b3;
        }

        /* Menu inferior */
        .bottom-menu {
            position: fixed;
            bottom: 0;
            width: 100%;
            background-color: rgba(173, 216, 230, 0.8);
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 10;
        }

        .bottom-menu a {
            text-align: center;
            color: #007bff;
            text-decoration: none;
            font-size: 14px;
        }

        .bottom-menu a:hover {
            color: #0056b3;
        }

        .fa-solid {
            font-size: 24px;
            margin-bottom: 5px;
        }

        /* Adicionando bolhas de fundo */
        .background-bubbles {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            z-index: -1;
            overflow: hidden;
        }

        .bubble {
            position: absolute;
            border-radius: 50%;
            opacity: 0.5;
            background-color: #66B9FA;
            animation: rise 15s infinite linear;
        }

        @keyframes rise {
            0% {
                transform: translateY(100vh);
            }
            100% {
                transform: translateY(-100vh);
            }
        }

        .bubble:nth-child(1) {
            width: 100px;
            height: 100px;
            left: 10%;
            animation-duration: 7s;
        }

        .bubble:nth-child(2) {
            width: 150px;
            height: 150px;
            left: 70%;
            animation-duration: 12s;
        }

        .bubble:nth-child(3) {
            width: 50px;
            height: 50px;
            left: 30%;
            animation-duration: 10s;
        }

        .bubble:nth-child(4) {
            width: 80px;
            height: 80px;
            left: 50%;
            animation-duration: 15s;
        }

        .bubble:nth-child(5) {
            width: 60px;
            height: 60px;
            left: 20%;
            animation-duration: 8s;
        }

        .bubble:nth-child(6) {
            width: 120px;
            height: 120px;
            left: 80%;
            animation-duration: 18s;
        }

        .bubble:nth-child(7) {
            width: 90px;
            height: 90px;
            left: 40%;
            animation-duration: 20s;
        }

        .bubble:nth-child(8) {
            width: 110px;
            height: 110px;
            left: 60%;
            animation-duration: 14s;
        }

        .bubble:nth-child(9) {
            width: 130px;
            height: 130px;
            left: 15%;
            animation-duration: 22s;
        }

        .bubble:nth-child(10) {
            width: 70px;
            height: 70px;
            left: 75%;
            animation-duration: 9s;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .container-dad {
                margin-top: 5%;
                padding: 15px;
                width: 95%;
            }

            .button-container button {
                width: 45%;
                font-size: 14px;
                padding: 10px 20px;
            }

            table {
                margin-top: 20px;
                font-size: 14px;
            }

            th, td {
                padding: 10px;
            }

            .fa-solid {
                font-size: 20px;
            }
        }

        @media (max-width: 480px) {
            .container-dad {
                margin-top: 5%;
                padding: 10px;
                width: 95%;
            }

            .button-container button {
                width: 100%;
                font-size: 16px;
                padding: 10px;
            }

            .bottom-menu {
                flex-direction: column;
                padding: 20px 0;
            }

            .bottom-menu a {
                margin: 5px 0;
            }

            th, td {
                padding: 8px;
            }

            .fa-solid {
                font-size: 18px;
            }
        }
    </style>
</head>

<body>

     <!-- Botão Flutuante -->
     <button id="floatButton" class="float-button">
        <img src="../chatbot/testeia.png.png" alt="Assistente" class="float-image">
    </button>

    <!-- Janela do Chat -->
    <div id="chatbox" class="chatbox hidden">
        <div id="chat-header" class="chat-header">
            <img src="../chatbot/50px2.png" alt="">
            <span>MIA</span>
            <button id="closeButton" class="close-button">&times;</button>
        </div>
        <div id="messages" class="messages"></div>
        <div id="options" class="options"></div>
    </div>


    <header class="header">
        <a href="pais.php" class="seta">
            <i class="fa-solid fa-arrow-left"></i>
        </a>
    </header>

    <div class="container-dad">
        <h1>Insira a Rotina</h1>
        <table id="editableTable">
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Horário</th>
                    <th>Atividade</th>
                    <th><i class="fa-solid fa-square-check"></i></th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="editable"></td>
                    <td class="editable"></td>
                    <td class="editable"></td>
                    <td>
                        <button class="editar-btn" onclick="editarLinha(this)">
                            <i class="fas fa-edit"></i> Editar
                        </button>
                        <button class="apagar-btn" onclick="apagarLinha(this)">
                            <i class="fas fa-trash"></i> Apagar
                        </button>
                    </td>
                </tr>
            </tbody>
        </table>

        <div class="button-container">
            <button onclick="adicionarLinha()">
                <i class="fas fa-plus"></i> Adicionar Linha
            </button>
            <button onclick="salvar()">
                <i class="fas fa-save"></i> Salvar
            </button>
            <button onclick="apagarTudo()">
                <i class="fas fa-trash-alt"></i> Apagar Tudo
            </button>
        </div>
    </div>

    <!-- Bolhas de fundo -->
    <div class="background-bubbles">
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
    </div>

    <!-- Menu inferior -->
    <div class="bottom-menu">
        <a href="#rotina" class="menu-item">
            <i class="fa-solid fa-calendar-check"></i>
        </a>
        <a href="#rotina" class="menu-item">
            <i class="fa-solid fa-chart-line"></i>
        </a>
        <a href="#apoio" class="menu-item">
            <i class="fa-solid fa-comments"></i>
        </a>       
    </div>

    <script>
        // Funções JavaScript para manipulação da tabela (não alteradas)
        function adicionarLinha() {
            var tabela = document.querySelector('#editableTable tbody');
            var tr = document.createElement('tr');
            tr.innerHTML = `
                <td><input type="date" class="editable"></td>
                <td><input type="time" class="editable"></td>
                <td contenteditable="true" class="editable"></td>
                <td>
                    <button class="editar-btn" onclick="editarLinha(this)">Editar</button>
                    <button class="apagar-btn" onclick="apagarLinha(this)">Apagar</button>
                </td>
            `;
            tabela.appendChild(tr);
            salvar(); // Salva automaticamente após adicionar a linha
        }

        function apagarLinha(botao) {
            botao.closest('tr').remove();
            salvar(); // Salva automaticamente após apagar a linha
        }

        function salvar() {
            var tabelaDados = [];
            document.querySelectorAll('#editableTable tbody tr').forEach(function(tr) {
                var linhaDados = {
                    data: tr.querySelector('td:nth-child(1) input').value,
                    hora: tr.querySelector('td:nth-child(2) input').value,
                    atividade: tr.querySelector('td:nth-child(3)').textContent
                };
                tabelaDados.push(linhaDados);
            });
            localStorage.setItem('tabelaDados', JSON.stringify(tabelaDados));
        }

        function carregarTabela() {
            var dados = localStorage.getItem('tabelaDados');
            if (dados) {
                dados = JSON.parse(dados);
                var tabela = document.querySelector('#editableTable tbody');
                tabela.innerHTML = '';

                dados.forEach(function(linhaDados) {
                    var tr = document.createElement('tr');
                    tr.innerHTML = `
                        <td><input type="date" class="editable" value="${linhaDados.data}"></td>
                        <td><input type="time" class="editable" value="${linhaDados.hora}"></td>
                        <td contenteditable="true" class="editable">${linhaDados.atividade}</td>
                        <td>
                            <button class="editar-btn" onclick="editarLinha(this)">Editar</button>
                            <button class="apagar-btn" onclick="apagarLinha(this)">Apagar</button>
                        </td>
                    `;
                    tabela.appendChild(tr);
                });
            }
        }

        function apagarTudo() {
            if (confirm("Deseja apagar todos os dados?")) {
                localStorage.removeItem('tabelaDados');
                carregarTabela(); // Recarrega a tabela limpa
            }
        }

        function editarLinha(botao) {
            var tr = botao.closest('tr');
            tr.querySelectorAll('td.editable').forEach(td => {
                makeEditable(td);
            });
        }

        function makeEditable(cell) {
            if (cell.contentEditable !== "true") {
                cell.contentEditable = "true";
                cell.focus();
            }

            cell.addEventListener('blur', function() {
                cell.contentEditable = "false";
                salvar(); // Salva automaticamente após a edição
            });
        }

        window.onload = carregarTabela;

        // Função para esconder/mostrar menu inferior com base no scroll
        let lastScrollTop = 0;
        const bottomMenu = document.querySelector('.bottom-menu');

        window.addEventListener('scroll', function() {
            let currentScroll = window.pageYOffset || document.documentElement.scrollTop;

            if (currentScroll > lastScrollTop) {
                bottomMenu.classList.add('hidden'); // Esconde o menu quando está rolando para baixo
            } else {
                bottomMenu.classList.remove('hidden'); // Mostra o menu quando rola para cima
            }

            lastScrollTop = currentScroll <= 0 ? 0 : currentScroll; // Previne valores negativos
        });
    </script>
</body>

<script src="../chatbot/scripts.js"></script>
</html>